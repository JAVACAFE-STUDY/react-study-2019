# 6장 리덕스로 상태 관리하기

## 리덕스란?
자바스크립트를 위한 상태 관리 프레임워크

## 리덕스를 사용하는 이유

* 컴포넌트 코드로부터 상태 관리 코드를 분리할 수 있다.
* 서버 렌더링 서ㅣ 데이터 전달이 간편하다.
* 로컬 스토리지에 데이터를 저장하고 불러오는 코드를 쉽게 작성할 수 있다.
* 같은 상탯값을 다수의 컴포넌트에서 필요로 할 때 좋다.
* 부모 컴포넌트에서 깊은 곳에 있는 자식 컴포넌트에 상탯값을 전달할 떄 좋다.
* 알림창과 같은 전역 컴포넌트의 상탯값을 관리할 때 좋다.
* 페이지가 전환되어도 데이터는 상아 있어야 할 때 좋다.
* 리덕스 홈페이지: https://redux.js.org/

## 리덕스 사용 시 따라야 할 세 가지 원칙

* https://redux.js.org/introduction/three-principles

### 전체 상댓값을 하나의 객체에 저장한다.

* 하나의 저장소에마다 하나의 object tree 안에 상탯값이 저장됨

### 상탯값은 불변 객체이다.

* 상탯 값 변경은 오직 액션 객체에 의해서만 변경되어야 한다.

### 상탯값은 순수 함수에 의해서만 변경되어야 한다.

* 리듀서: 리덕스에서 상탯값을 변경하는 함수
```javascript
//리듀서의 형태
(state, action) => state
```
* 리듀서는 이전 상탯값과 액션 객체를 입력으로 받아서 새로운 상탯값을 만드는 순수 함수.
* https://www.vobour.com/%EB%A6%AC%EB%8D%95%EC%8A%A4-redux-%EC%9D%98-%EB%A6%AC%EB%93%80%EC%84%9C-reducer-%EA%B0%80-%EC%88%9C%EC%88%98-%ED%95%A8%EC%88%98%EC%97%AC%EC%95%BC%EB%A7%8C-%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0
* 순수 함수란?
  * 동일한 입력 값이면 동일한 결과 값이 나오는 함수
  * side effect가 발생하지 않는다.

## 리덕스의 주요 개념 이해하기

![](https://i.stack.imgur.com/LNQwH.png)

### 액션

* 액션은 type 속성값을 가진 자바스크립트 객체
* 액션 객체를 dispatch 매서드에 넣어서 호출하면 리덕스는 상탯값을 변경
* type 이름의 충돌을 피하기 위해서 접두사를 두는 방법을 이용하던가 심볼을 사용
* 액션 객체를 직접 사용하는 것은 좋지 않은 방법이고 액션 생성자 함수를 활용해서 액션을 생성

### 미들웨어

* 리듀서가 액션을 처리하기 전에 실행하는 함수

### 라듀서

* 액션이 발생했을 때 새로운 상탯값을 만드는 함수.
* 새로운 상탯값을 생성해야 하기 때문에 그냥 하면 상당히 복잡해질 수 있기 때문에, 이머 같은 외부 함수를 활용한다.
* createReducer 함수를 할용하면 switch 문을 사용하지 않고 구현이 가능

### 스토어

* 리덕스의 상탯값을 갖는 객체
* 스토어는 액션이 발생하면 미들웨어 함수를 실행하고, 리듀서를 실행해서 상탯값을 새로운 값으로 변경, 그리고 사전에 등록된 모든 이벤트 처리 함수에게 액션의 처리가 끝났음을 알린다.
* 특별한 이유가 없다면 스토어는 하나만 만드는 게 좋다.

## 데이터 종류별로 상탯값 나누기

여기서 부터는 소스로

* 덕스패턴: https://github.com/erikras/ducks-modular-redux
* 훅 사용하기: https://react-redux.js.org/next/api/hooks




